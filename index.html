<html>
<head>
  <title>College Level Physics Tutor</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>
  <div class="container">
    <h1 class="text-center">College Level Physics Tutor</h1>
    <div id="chat-container" class="mt-5">
      <div id="chat-messages"></div>
      <div id="loading-indicator" class="text-center">
        <img src="https://cdn.dribbble.com/users/192126/screenshots/2232588/loading.gif" alt="Loading..." width="50">
      </div>
    </div>
    <div id="user-input" class="mt-3">
      <input type="text" id="message-input" class="form-control" placeholder="Enter your message">
      <button id="send-button" class="btn btn-primary mt-3">Send</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
  <script>
    const chatContainer = document.getElementById('chat-container');
    const chatMessages = document.getElementById('chat-messages');
    const loadingIndicator = document.getElementById('loading-indicator');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');

    sendButton.addEventListener('click', sendMessage);
    messageInput.addEventListener('keypress', function(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    });

    function sendMessage() {
      const message = messageInput.value.trim();
      if (message !== '') {
        appendUserMessage(message);
        messageInput.value = '';
        showLoadingIndicator();
        sendToChatGPT(message).then(appendAssistantMessage);
      }
    }

    function appendUserMessage(message) {
      const userMessageElement = document.createElement('div');
      userMessageElement.className = 'alert alert-primary';
      userMessageElement.innerText = message;
      chatMessages.appendChild(userMessageElement);
      scrollToBottom();
    }

    function appendAssistantMessage(message) {
      hideLoadingIndicator();
      const assistantMessageElement = document.createElement('div');
      assistantMessageElement.className = 'alert alert-success';
      assistantMessageElement.innerText = message;
      chatMessages.appendChild(assistantMessageElement);
      scrollToBottom();
    }

    function sendToChatGPT(message) {
      const body = {
        "systemPrompt": "You are a College Level Physics Tutor. Provide helpful responses to students' physics questions.",
        "prompts": [
          { "role": "user", "content": message }
        ]
      };

      return fetch('https://www.literallyanything.io/api/integrations/chatgpt', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(body)
      })
      .then(response => response.json())
      .then(data => data.response);
    }

    function showLoadingIndicator() {
      loadingIndicator.style.display = 'block';
    }

    function hideLoadingIndicator() {
      loadingIndicator.style.display = 'none';
    }

    function scrollToBottom() {
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }
  </script>
</body>
</html>
